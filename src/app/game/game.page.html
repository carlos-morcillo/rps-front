<ion-header [translucent]="true">
	<ion-toolbar color="primary">
		<ion-buttons slot="start">
			<ion-back-button defaultHref="/"></ion-back-button>
		</ion-buttons>
		<ion-title>Juego</ion-title>
		<ion-badge color="secondary" slot="end" class="ion-margin-end">ROUND {{ game?.roundNumber }} OF
			{{ game?.numberOrRounds }}
		</ion-badge>
	</ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" color="primary">
	<ng-container *ngIf="game?.resultCode; else inProgressTpt">
		<ion-toolbar>
			<ion-title class="ion-text-center">
				YOU_{{ game.resultCode }}_THE_GAME!
			</ion-title>
		</ion-toolbar>
		<ion-grid>
			<ion-row>
				<ion-col size-md="4" offset-md="4">
					<ion-card *ngFor="let round of game.rounds; let i=index;">
						<ion-card-header>
							<ion-card-subtitle>ROUND #{{ i + 1 }}</ion-card-subtitle>
							<ion-card-title>{{ round.resultCode }}</ion-card-title>
						</ion-card-header>
						<ion-card-content>
							<div class="d-flex justify-content-around align-items-center">
								<i class="far fa-2x" [ngClass]="'far fa-hand-' + round.userActionCode | lowercase"
									slot="start"></i>
								<ion-chip color="tertiary">
									<ion-label>VS</ion-label>
								</ion-chip>
								<i class="far fa-2x" [ngClass]="'far fa-hand-' + round.machineActionCode | lowercase"
									slot="end"></i>
							</div>
						</ion-card-content>
					</ion-card>
				</ion-col>
			</ion-row>
		</ion-grid>


	</ng-container>
	<ng-template #inProgressTpt>
		<div id="gameContainer" class="d-flex flex-column justify-content-around">
			<div>
				<div class="d-flex justify-content-start ion-padding">
					<ion-chip>
						<i class="fas fa-robot" color="secondary"></i>
						<ion-label>MACHINE</ion-label>
					</ion-chip>
				</div>
				<div class="flex-grown-1 ion-text-center">
					<button class="action-button user_selection">
						<i class="far fa-question"></i>
					</button>
				</div>
			</div>
			<div>
				<div class="d-flex justify-content-end ion-padding">
					<ion-chip>
						<i class="fas fa-user" color="secondary"></i>
						<ion-label>USER</ion-label>
					</ion-chip>
				</div>
				<div class="d-flex flex-column h-100 align-items-center">

					<div class="flex-grown-1">
						<button class="action-button user_selection">
							<i class="far fa-question"></i>
							<ion-ripple-effect></ion-ripple-effect>

						</button>
					</div>
					<div class="ion-margin">
						<button class="action-button" *ngFor="let action of actions" (click)="play(action)">
							<i [ngClass]="action.image"></i>
						</button>
					</div>
				</div>

			</div>
		</div>
	</ng-template>
</ion-content>
<amazing-alert *ngIf="roundResult">
	<h3 class="text-shadow">{{ 'YOU_' + roundResult + '_THE_ROUND!' }}</h3>
	<div class="d-flex justify-content-end ion-margin-top">
		<ion-button color="light" class="ion-margin-end">
			CONTINUE
		</ion-button>
	</div>
</amazing-alert>

<amazing-alert *ngIf="showGameResult">
	<h2 class="text-shadow">{{ 'YOU_' + game.resultCode + '_THE_GAME!' }}</h2>
	<div class="d-flex justify-content-end ion-margin-top">
		<ion-button (click)="showSummary()" color="light" class="ion-margin-end">
			SHOW_SUMMARY
		</ion-button>
		<ion-button fill="outline" color="light" [routerLink]="['/']">
			BACK_TO_HOME
		</ion-button>
	</div>
</amazing-alert>
